{% extends "crm_core/base.html" %}
{% load datetime_extras %}
{% block title %}Kontakte{% endblock %}
{% block content %}
<h1>Kontakte</h1>

<p style="margin:8px 0">
  <a class="btn" href="{% url 'crm_core:contact_create' %}">+ Neuer Kontakt</a>
</p>

{% if contacts %}
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>E-Mail</th>
      <th>Aktionen</th>
    </tr>
  </thead>
  <tbody>
    {% for c in contacts %}
    <tr>
      <td>{{ c.last_name }}{% if c.last_name and c.first_name %}, {% endif %}{{ c.first_name }}</td>
      <td>{{ c.email|default:"—" }}</td>
      <td style="white-space:nowrap">
        <a class="btn" href="{% url 'crm_core:contact_detail' c.pk %}">Anzeigen</a>
        <a class="btn" href="{% url 'crm_core:contact_update' c.pk %}">Bearbeiten</a>
        <a class="btn" href="{% url 'crm_core:contact_delete' c.pk %}">Löschen</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
  <p>Keine Kontakte vorhanden.</p>
{% endif %}
{% endblock %}
